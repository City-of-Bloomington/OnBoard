{% macro actionLink(url, label, class) %}
{% set classmap={
 'archive':   'save_alt',
 'unarchive': 'undo',
 'download': 'file_download'
} %}
<a href="{{ url }}" class="usa-link margin-right-05">{{ label }}{% if class %}<svg class="usa-icon margin-left-2px" aria-hidden="true" focusable="false" role="img"><use href="/static/uswds/dist/img/sprite.svg#{{ class and classmap[class] is defined ? classmap[class] : class }}"></use></svg>{% endif %}</a>
{% endmacro %}

{% macro button(type, label, class) %}
{% set classmap={
 'cancel': 'usa-button--outline'
} %}
<button type="{{ type }}" class="usa-button {{ class and classmap[class] is defined ? classmap[class] : '' }}">{{ label }}</button>
{% endmacro %}

{% macro field_text(id, name, label, value, required=false, attr={}, help=null) %}
    <label for="{{ id }}" class="usa-label">{{ label }} {{- required ? '<span> *</span>' : '' }}</label>
    {% if help %}<div class="usa-hint" id="{{ id }}-help">{{ help }}</div>{% endif %}
    <input  id="{{ id }}" name="{{ name }}"  value="{{ value }}" class="usa-input"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %} />
{% endmacro %}

{% macro field_radio(id, name, label, value, options, required=false, attr={}, help=null) %}
<div><p>{{ label }}</p>
    {% for o in options %}
    <div class="usa-radio">
        <input class="usa-radio__input"  id="{{ name }}_{{ o.value }}" name="{{ name }}" type="radio" value="{{ o.value }}" {{ value==o.value ? 'checked="checked"' : '' }} />
        <label class="usa-radio__label" for="{{ name }}_{{ o.value }}">{{ o.label ?? o.value }}</label>
    </div>
    {% endfor %}
    {% if help %}<p>{{ help }}</p>{% endif %}
</div>
{% endmacro %}

{% macro field_select(id, name, label, value, options, required=false, attr={}, help=null) %}
    <label class="usa-label" for="{{ id }}">{{ label }}</label>
    {% if help %}<div class="usa-hint" id="{{ id }}-help">{{ help }}</div>{% endif %}
    <select id="{{ id }}" name="{{ name }}" class="usa-select"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %}>
        {% for o in options %}
        <option value="{{ o.value }}" {{ o.value==value ? 'selected="true"' : '' }}>{{ o.value ?? o.value }}</option>
        {% endfor %}
    </select>
{% endmacro %}

{% macro field_combo(id, name, label, value, options, required=false, attr={}, help=null) %}
    <label class="usa-label" for="{{ id }}">{{ label }}</label>
    {% if help %}<div class="usa-hint" id="{{ id }}-help">{{ help }}</div>{% endif %}
    <div class="usa-combo-box" data-placeholder={{ value }}>
        <select id="{{ id }}" name="{{ name }}" class="usa-select"
            {{- required ? ' required="true"' : '' }}
            {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
            {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %}>
            {% for o in options %}
            <option value="{{ o.value }}" {{ o.value==value ? 'selected="true"' : '' }}>{{ o.value ?? o.value }}</option>
            {% endfor %}
        </select>
    </div>
{% endmacro %}

{% macro field_password(id, name, label, value, required=false, attr={}, help=null) %}
<div class="mb-3">
    <label for="{{ id }}">{{ label }}</label>
    <input  id="{{ id }}" name="{{ name }}"  value="{{ value }}" type="password" class="form-control"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %} />
    {% if help %}<span class="form-text" id="{{ id }}-help">{{ help }}</span>{% endif %}
</div>
{% endmacro %}

{% macro field_email(id, name, label, value, required=false, attr={}, help=null) %}
    <label class="usa-label" for="{{ id }}">{{ label }} {{- required ? '<span> *</span>' : '' }}</label>
    {% if help %}<div class="usa-hint" id="{{ id }}-help">{{ help }}</div>{% endif %}
    <input  id="{{ id }}" name="{{ name }}"  value="{{ value }}" type="email" class="usa-input"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %} />
{% endmacro %}

{% macro field_phone(id, name, label, value, required=false, attr={}, help=null) %}
    <label class="usa-label" for="{{ id }}">{{ label }} {{- required ? '<span> *</span>' : '<span> (optional)</span>' }}</label>
    {% if help %}<div class="usa-hint" id="{{ id }}-help">{{ help }}</div>{% endif %}
    <input  id="{{ id }}" name="{{ name }}"  value="{{ value }}" type="tel" class="usa-input"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %} />
{% endmacro %}

{% macro field_url(id, name, label, value, required=false, attr={}, help=null) %}
    <label class="usa-label" for="{{ id }}">{{ label }}</label>
    {% if help %}<div class="usa-hint" id="{{ id }}-help">{{ help }}</div>{% endif %}
    <input  id="{{ id }}" name="{{ name }}"  value="{{ value }}" type="url" class="usa-input"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %} />
{% endmacro %}

{% macro field_date(id, name, label, value, required=false, attr={}, help=null) %}
<div class="usa-form-group">
    <label class="usa-label" for="{{ id }}">{{ label }}{{- required ? '<span> *</span>' : '<span> (optional)</span>' }}</label>
    {% if help %}<div class="usa-hint" id="{{ id }}-help">{{ help }}</div>{% endif %}
    <div class="usa-date-picker">
    <input  id="{{ id }}" name="{{ name }}"  value="{{ value }}" type="date" class="usa-input"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %} />
    </div>
</div>
{% endmacro %}

{% macro field_textarea(id, name, label, value, required=false, attr={}, help=null) %}
    <label class="usa-label" for="{{ id }}">{{ label }}</label>
    {% if help %}<div class="usa-hint" id="{{ id }}-help">{{ help }}</div>{% endif %}
    <textarea id="{{ id }}" name="{{ name }}" class="usa-textarea"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %}>{{ value }}</textarea>
{% endmacro %}

{% macro field_file(id, name, label, value, required=false, attr={}, help=null) %}
<div class="mb-3">
    <label for="{{ id }}">{{ label }}</label>
    {% if value %}<div>{{ value }}</div>{% endif %}
    <input  id="{{ id }}" name="{{ name }}" type="file" class="form-control"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %} />
    {% if help %}<span class="form-text" id="{{ id }}-help">{{ help }}</span>{% endif %}
</div>
{% endmacro %}

{% macro field_number(id, name, label, value, required=false, attr={}, help=null) %}
    <label for="{{ id }}" class="usa-label">{{ label }}</label>
    <input  id="{{ id }}" name="{{ name }}"  value="{{ value }}" type="number" class="usa-input usa-input--medium"
        {{- required ? ' required="true"' : '' }}
        {%- if help %} aria-describedby="{{ id  }}-help"{% endif %}
        {%- for k,v in attr %} {{ k }}="{{ v }}" {% endfor %} />
    {% if help %}<span class="form-text" id="{{ id }}-help">{{ help }}</span>{% endif %}
{% endmacro %}

{% macro field_bool(id, name, label, value, required=false, attr={}, help=null) %}
<div class="form-check form-switch">
    <input name="{{ name }}" id="{{ id }}"
            type="checkbox" value="1" {{ value ? 'checked="true"': '' }}
            class="form-check-input"  role="switch" />
    <label for="{{ id }}" class="form-check-label">{{ label }}</label>
</div>
{% endmacro %}
